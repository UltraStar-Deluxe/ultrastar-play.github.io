(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{2378:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn/mods",function(){return s(9340)}])},9340:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return t}});var i=s(5893),l=s(1151),d=s(7318),o=s(2221);let r=e=>{let{children:n}=e;return(0,i.jsx)(d.Z,{children:n})};function a(e){let n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",li:"li",p:"p",ul:"ul",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"what-is-a-mod",children:"What is a Mod"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["UltraStar Play can be extended with custom code that can be used to modify (mod) the game.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["TIP: Browse mods and other user-generated content on ",(0,i.jsx)(n.a,{href:"/learn/steam-workshop",children:"Steam Workshop"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["A folder with such custom code is called a ",(0,i.jsx)(n.em,{children:"mod folder"})," or short ",(0,i.jsx)(n.em,{children:"mod"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-to-install-mods",children:"How to Install Mods"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Mod folders are searched in a specific folder called the ",(0,i.jsx)(n.em,{children:"mods root folder"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The mods root folder can be found by executing the command ",(0,i.jsx)(n.code,{children:"mod.path"})," in the game's console (open via ",(0,i.jsx)(n.code,{children:"F7"}),")."]}),"\n",(0,i.jsx)(n.li,{children:"To install a mod folder, copy it to the mods root folder. An app restart may be required afterwards."}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"how-to-develop-mods",children:"How to Develop Mods"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mod development for UltraStar Play means C# programming."}),"\n",(0,i.jsxs)(n.li,{children:["This can be done with ",(0,i.jsx)(n.a,{href:"https://code.visualstudio.com/",children:"Visual Studio Code"}),"\nand the ",(0,i.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csdevkit",children:"C# Dev Kit"}),"\nthat provides IDE features such as code completion, error markers, parameter hints, go to definition, etc."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"mod-interfaces",children:"Mod Interfaces"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A mod needs to implement certain C# interfaces that are instantiated by the game."}),"\n",(0,i.jsxs)(n.li,{children:["Available interfaces for mods can be found by executing ",(0,i.jsx)(n.code,{children:"mod.interfaces"})," in the game's console."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"create-a-new-mod",children:"Create a New Mod"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Press ",(0,i.jsx)(n.code,{children:"F7"})," to open the game's console"]}),"\n",(0,i.jsxs)(n.li,{children:["Execute the command ",(0,i.jsx)(n.code,{children:"mod.create MyModName"})," in the console.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This will create a new example mod with the given name."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Open the created mod folder in Visual Studio Code. Install C# Dev Kit if not done already."}),"\n",(0,i.jsx)(n.li,{children:"Write C# code as needed."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"the-csproj-file",children:"The .csproj file"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:".csproj"})," file holds information about the C# project structure of the mod."]}),"\n",(0,i.jsxs)(n.li,{children:["This file tells the IDE which C# libraries (DLL files) are available.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The file should point to the DLL files that are shipped with the game,\nplus the DLL files in the mod folder itself."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"This file is used only by the IDE, not by the game."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"the-modinfoyml-file",children:"The modinfo.yml file"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Information about the mod such as its name, description, and version should be specified in the file ",(0,i.jsx)(n.code,{children:"modinfo.yml"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The information from ",(0,i.jsx)(n.code,{children:"modinfo.yml"})," can be accessed by the user in the game without enabling the mod."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"the-modsettingsjson-file",children:"The modsettings.json file"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Instances of ",(0,i.jsx)(n.code,{children:"IModSettings"})," are saved and loaded from the file ",(0,i.jsx)(n.code,{children:"modsettings.json"})," of their corresponding mod folder."]}),"\n",(0,i.jsx)(n.li,{children:"There should only be a single IModSettings implementation per mod."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"loading-assemblies-and-types",children:"Loading Assemblies and Types"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Not all of the app domain (i.e. loaded libraries) is exposed to mods by default."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To make all types from an assembly (e.g. ",(0,i.jsx)(n.code,{children:"Newtonsoft.Json"}),") available to your mod, specify the assembly in ",(0,i.jsx)(n.code,{children:"requiredAssemblies"})," of ",(0,i.jsx)(n.code,{children:"modinfo.yml"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To make specific types in an already loaded assembly (e.g. ",(0,i.jsx)(n.code,{children:"System.Uri"}),") available to your mod, specify the type in ",(0,i.jsx)(n.code,{children:"requiredTypes"})," of ",(0,i.jsx)(n.code,{children:"modinfo.yml"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["NOTE: Types from the standard library (for example ",(0,i.jsx)(n.code,{children:"System.Uri"})," from the assembly ",(0,i.jsx)(n.code,{children:"mscorlib"}),") must be loaded using this field because ",(0,i.jsx)(n.code,{children:"requiredAssemblies"})," cannot be used to load the standard library a second time."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["You can find the assembly of a type using ",(0,i.jsx)(n.code,{children:"go to declaration"})," of Visual Studio Code (see below video)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(o.Z,{src:"/videos/modding/find-assembly.webm"}),"\n",(0,i.jsx)(n.h3,{id:"mod-loading",children:"Mod Loading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mods are loaded in alphabetical order."}),"\n",(0,i.jsxs)(n.li,{children:["Enabled mod are loaded when","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"the game starts"}),"\n",(0,i.jsx)(n.li,{children:"a mod becomes enabled"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Instances of classes from mods are created only after all enabled mods have been loaded"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"script-loading-order",children:"Script Loading Order"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"First, DLL files in the mod folder are loaded in alphabetical order."}),"\n",(0,i.jsx)(n.li,{children:"Second, C# files in the mod folder are loaded in alphabetical order."}),"\n",(0,i.jsxs)(n.li,{children:["Thus, you can change the load order of your scripts be naming them accordingly, e.g., with a letter prefix.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Example: ",(0,i.jsx)(n.code,{children:"a-MyCoolFile.cs"})," would be loaded before ",(0,i.jsx)(n.code,{children:"b-MyAwesomeFile.cs"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"evaluate-code-in-the-console",children:"Evaluate Code in the Console"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The game's console can be used to evaluate C# code by using the ",(0,i.jsx)(n.code,{children:"mod.eval"})," command.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Example: ",(0,i.jsx)(n.code,{children:'mod.eval (UnityEngine.Debug.Log("Hello world!"))'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Note that the first pair of parentheses is needed to handle the console argument as a single argument when there is a space"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Using statements can be used as well","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Example:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mod.eval (using UnityEngine)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:'mod.eval (Debug.Log("Hello world!"))'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Example to change style of a UI element:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mod.eval (using UnityEngine.UIElements)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:'mod.eval (GameObject.FindObjectOfType<UIDocument>().rootVisualElement.Q("logo").style.opacity = 0.1f))'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Loaded mods are not available in this code evaluation."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"troubleshooting-hints",children:"Troubleshooting Hints"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Disable other mods while working on a new mod."}),"\n",(0,i.jsxs)(n.li,{children:["Make sure C# Dev Kit and the C# project are loaded correctly.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Try to write something that is known to fail, e.g., ",(0,i.jsx)(n.code,{children:"ThisIsWrong()"})," and check that an error marker appears as expected."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Make sure that there are no error markers in the IDE","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Only a mod without errors will load properly in the game."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Make sure the dependencies of your scripts match their load order.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Scripts of a mod are loaded in alphabetical order."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Make sure ",(0,i.jsx)(n.code,{children:"modinfo.yml"})," specifies all required assemblies in the ",(0,i.jsx)(n.code,{children:"requiredAssemblies"})," field or specific types in the ",(0,i.jsx)(n.code,{children:"requiredTypes"})," field."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"UnityEngine.Debug.Log"})," to write information to the game's console."]}),"\n",(0,i.jsx)(n.li,{children:"Try to restart the app and see if errors are still present."}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})})}},3617:function(e,n,s){"use strict";var i=s(5893),l=s(1188);n.Z=e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top shadow-sm",id:"mainNav",style:{paddingTop:"0.5rem",paddingBottom:"0.5rem"},children:(0,i.jsxs)("div",{className:"container px-5",children:[(0,i.jsx)("a",{className:"navbar-brand fw-bold",href:"#page-top",children:e.title}),(0,i.jsxs)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",(0,i.jsx)("i",{className:"bi-list"})]}),(0,i.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:(0,i.jsx)("ul",{className:"navbar-nav ms-auto me-4 my-3 my-lg-0",children:(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(l.Z,{className:"nav-link me-lg-3",href:"/",children:"Home"})})})})]})})})},7318:function(e,n,s){"use strict";var i=s(5893),l=s(3617);n.Z=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{title:"UltraStar Play"}),(0,i.jsx)("div",{className:"mdx-content ".concat(e.additionalClasses," "),children:(0,i.jsx)("div",{className:"section",children:(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row justify-content-center",children:(0,i.jsx)("div",{className:"col-lg-6",children:e.children})})})})})]})},1188:function(e,n,s){"use strict";var i=s(5893);s(7294);var l=s(1664),d=s.n(l),o=s(1163);n.Z=e=>{let{children:n,skipLocaleHandling:s,...l}=e,r=(0,o.useRouter)(),a=l.locale||r.query.locale||"",t=l.href||r.asPath;return 0===t.indexOf("http")&&(s=!0),a&&!s&&(t=t?"/".concat(a).concat(t):r.pathname.replace("[locale]",a)),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d(),{...l,href:t,children:n})})}},2221:function(e,n,s){"use strict";var i=s(5893);n.Z=e=>(0,i.jsxs)("video",{controls:!0,children:[(0,i.jsx)("source",{src:e.src,type:"video/webm"}),"Your browser does not support the video tag."]})},1151:function(e,n,s){"use strict";s.d(n,{a:function(){return d}});var i=s(7294);let l=i.createContext({});function d(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=2378)}),_N_E=e.O()}]);